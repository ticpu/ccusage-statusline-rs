#!/bin/bash
# Pre-commit hook to check formatting and clippy

set -e

if ! cargo fmt -- --check 2>/dev/null; then
    echo "âŒ Code is not formatted. Run 'cargo fmt' to fix."
    exit 1
fi

if ! cargo clippy --all-targets --message-format=short -- -D warnings 2>&1 | grep -qE "^error|^warning"; then
    exit 0
else
    cargo clippy --all-targets --message-format=short -- -D warnings
    exit 1
fi
